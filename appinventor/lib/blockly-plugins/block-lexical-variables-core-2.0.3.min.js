/*! For license information please see core.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("blockly/core"));else if("function"==typeof define&&define.amd)define(["blockly/core"],t);else{var n="object"==typeof exports?t(require("blockly/core")):t(e.Blockly);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,(e=>(()=>{"use strict";var t={370:t=>{t.exports=e},917:(e,t,n)=>{n.d(t,{G:()=>s});var o=n(370),r=n(653);class s extends o.FieldTextInput{static timeout=500;static showPid_=0;static openFieldFlydown_=null;static DISPLAY_BELOW="BELOW";static DISPLAY_RIGHT="RIGHT";static DISPLAY_LOCATION=s.DISPLAY_BELOW;constructor(e,t,n,o){super(e,o),this.EDITABLE=t,this.displayLocation=n||s.DISPLAY_RIGHT}showEditor_(){this.EDITABLE&&(s.showPid_&&(clearTimeout(s.showPid_),s.showPid_=0,o.common.getMainWorkspace().hideChaff()),super.showEditor_())}init(e){super.init(e),o.utils.dom.removeClass(this.fieldGroup_,"blocklyEditableText"),o.utils.dom.removeClass(this.fieldGroup_,"blocklyNoNEditableText"),o.utils.dom.addClass(this.fieldGroup_,this.fieldCSSClassName),this.mouseOverWrapper_=o.browserEvents.bind(this.fieldGroup_,"mouseover",this,this.onMouseOver_),this.mouseOutWrapper_=o.browserEvents.bind(this.fieldGroup_,"mouseout",this,this.onMouseOut_)}}s.prototype.fieldCSSClassName="blocklyFieldFlydownField",s.prototype.flyoutCSSClassName="blocklyFieldFlydownFlydown",s.prototype.onMouseOver_=function(e){this.sourceBlock_.isInFlyout||0!=s.showPid_||(s.showPid_=window.setTimeout(this.showFlydownMaker_(),s.timeout)),e.stopPropagation()},s.prototype.onMouseOut_=function(e){window.clearTimeout(s.showPid_),s.showPid_=0,e.stopPropagation()},s.prototype.showFlydownMaker_=function(){const e=this;return function(){if(0!==s.showPid_&&!e.getSourceBlock().workspace.isDragging()&&!this.htmlInput_)try{e.showFlydown_()}catch(e){console.error("Failed to show flydown",e)}s.showPid_=0}},s.prototype.showFlydown_=function(){o.common.getMainWorkspace().hideChaff();const e=o.common.getMainWorkspace().getFlydown();o.common.getMainWorkspace().getParentSvg().appendChild(e.svgGroup_);const t=e.targetWorkspace.scale;e.workspace_.setScale(t),e.setCSSClass(this.flyoutCSSClassName);const n=this.flydownBlocksXML_(),i=o.utils.xml.textToDom(n),a=r.i0(i),l=o.common.getMainWorkspace().getSvgXY(this.borderRect_),c=this.borderRect_.getBBox();this.displayLocation===s.DISPLAY_BELOW?l.y+=c.height*t:l.x+=c.width*t,e.field_=this,e.showAt(a,l.x,l.y),s.openFieldFlydown_=this},s.hide=function(){window.clearTimeout(s.showPid_);const e=o.common.getMainWorkspace().getFlydown();e&&e.hide()},s.prototype.onHtmlInputChange_=function(e){const t=this.htmlInput_,n=t.value;if(n!==t.oldValue_){t.oldValue_=n;let e=!0;this.sourceBlock_&&(e=function(e,t){const n=e.doClassValidation_(t);if(null===n)return null;void 0!==n&&(t=n);const o=e.getValidator();if(o){const n=o.call(e,t);if(null===n)return null;void 0!==n&&(t=n)}return t}(this,t.value)),null===e?o.utils.dom.addClass(t,"blocklyInvalidInput"):(o.utils.dom.removeClass(t,"blocklyInvalidInput"),this.doValueUpdate_(e))}else o.utils.userAgent.WEBKIT&&this.sourceBlock_.render();this.textContent_.nodeValue=n,this.forceRerender(),this.resizeEditor_(),o.svgResize(this.sourceBlock_.workspace)},s.prototype.dispose=function(){s.openFieldFlydown_==this&&s.hide(),o.FieldTextInput.prototype.dispose.call(this)},s.fromJson=function(e){const t=o.utils.replaceMessageReferences(e.name);return new s(t,e.is_editable)},o.fieldRegistry.register("field_flydown",s)},659:(e,t,n)=>{n.d(t,{l:()=>i});var o=n(370),r=(n(720),n(917)),s=n(824);class i extends r.G{constructor(e,t){super(e,!0,t,s.f.renameGlobal)}}i.prototype.fieldCSSClassName="blocklyFieldParameter",i.prototype.flyoutCSSClassName="blocklyFieldParameterFlydown",i.prototype.flydownBlocksXML_=function(){const e=o.Msg.LANG_VARIABLES_GLOBAL_PREFIX+" "+this.getText();return'<xml><block type="lexical_variable_get"><title name="VAR">'+e+'</title></block><block type="lexical_variable_set"><title name="VAR">'+e+"</title></block></xml>"},i.fromJson=function(e){const t=o.utils.replaceMessageReferences(e.name);return new i(t)},o.fieldRegistry.register("field_global_flydown",i)},824:(e,t,n)=>{n.d(t,{b:()=>a,f:()=>c});var o=n(370);n(720);var r=n(624),s=n(976),i=n(232);class a extends o.FieldDropdown{constructor(e){super(a.dropdownCreate),e?this.doValueUpdate_(e):this.doValueUpdate_(o.Variables.generateUniqueName())}}a.prototype.doClassValidation_=function(e){return e},a.prototype.getBlock=function(){return this.block_},a.prototype.setBlock=function(e){this.block_=e},a.getGlobalNames=function(e){const t=o.common.getMainWorkspace(),n=t.getRootWorkspace()||t;if(n&&n.getWarningHandler&&n.getWarningHandler().cacheGlobalNames)return n.getWarningHandler().cachedGlobalNames;const r=[];if(n&&!n.isFlyout){let t=[];t=n.getTopBlocks();for(let n=0;n<t.length;n++){const o=t[n];o.getGlobalNames&&o!=e&&r.push(...o.getGlobalNames())}}return r},a.prototype.getNamesInScope=function(){return a.getNamesInScope(this.block_)},a.getNamesInScope=function(e){let t=a.getGlobalNames();t=c.sortAndRemoveDuplicates(t),t=t.map((function(e){return[r.prefixGlobalMenuName(e),"global "+e]}));const n=a.getLexicalNamesInScope(e);return t.concat(n)},a.getLexicalNamesInScope=function(e){let t=[];const n={};let o,s;function i(e,t,o){let s;r.usePrefixInCode?s=r.possiblyPrefixMenuNameWith(o)(e):(n[e]||(n[e]=o),s=r.possiblyPrefixMenuNameWith(n[e])(e)),t.push(s)}if(s=e,s&&(o=s.getParent(),o))for(;o;)o.withLexicalVarsAndPrefix&&o.withLexicalVarsAndPrefix(s,((e,n)=>{i(e,t,n)})),s=o,o=o.getParent();return t=c.sortAndRemoveDuplicates(t),t.map((function(e){return[e,e]}))},a.dropdownCreate=function(){const e=this.getNamesInScope();return 0==e.length?[[" "," "]]:e},a.prototype.doValueUpdate_=function(e){if(Object.getPrototypeOf(o.FieldDropdown).prototype.doValueUpdate_.call(this,e),e&&" "!==e){const t=e.split(" ");2==t.length&&"global"!==t[0]&&(e="global "+t[1])}this.value_=e;const t=this.getOptions(!0,[[(n=e,n.startsWith("global ")?n.replace("global ",o.Msg.LANG_VARIABLES_GLOBAL_PREFIX+" "):n),e]]);var n;for(let e,n=0;e=t[n];n++)if(e[1]==this.value_){this.selectedOption=e;break}this.updateMutation(),this.forceRerender()},a.prototype.updateMutation=function(){const e=this.getText();if(this.sourceBlock_&&this.sourceBlock_.getParent()){if(this.sourceBlock_.eventparam=void 0,0===e.indexOf(o.Msg.LANG_VARIABLES_GLOBAL_PREFIX+" "))return void(this.sourceBlock_.eventparam=null);let t,n=this.sourceBlock_.getParent();for(;n;){const o=n.declaredVariables?n.declaredVariables():[];if("component_event"!=n.type){for(t=0;t<o.length;t++)if(o[t]==e)return void(this.sourceBlock_.eventparam=null)}else for(t=0;t<o.length;t++)if(o[t]==e)return void(this.sourceBlock_.eventparam=n.getParameters()[t].name);n=n.getParent()}}},a.prototype.getOptions=function(e,t){Array.isArray(e)&&(t=e);const n=t||[];return this.isOptionListDynamic()?(this.generatedOptions_&&e||(this.generatedOptions_=this.menuGenerator_.call(this).concat(n),l(this.generatedOptions_)),this.generatedOptions_.concat(n)):this.menuGenerator_};const l=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let n=0;n<e.length;++n){const o=e[n];Array.isArray(o)?"string"!=typeof o[1]?(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option id must be a string. Found "+o[1]+" in: ",o)):o[0]&&"string"!=typeof o[0]&&"string"!=typeof o[0].src&&(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must have a string label or image description. Found"+o[0]+" in: ",o)):(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must be an array. Found: ",o))}if(t)throw TypeError("Found invalid FieldDropdown options.")};a.dropdownChange=function(e){if(e){this.doValueUpdate_(e);const t=this.sourceBlock_.workspace.getTopWorkspace();t.getWarningHandler&&t.getWarningHandler().checkErrors(this.sourceBlock_)}},a.nameNotIn=function(e,t){const n=a.prefixSuffix(e),o=n[0],r=n[1];let s=!1,i=!1;const l=[];for(let e=0;e<t.length;e++){const n=a.prefixSuffix(t[e]),c=n[0],u=n[1];c===o&&(u===r&&(i=!0),""===u?s=!0:l.push(u))}if(i){if(s){const e=l.map((function(e,t,n){return parseInt(e,10)}));e.sort((function(e,t){return e-t}));let t=2,n=0;for(;n<e.length;){if(t<e[n])return o+t;t==e[n]?(t++,n++):n++}return o+t}return o}return e},a.prefixSuffix=function(e){const t=e.match(/^(.*?)(\d+)$/);return t?[t[1],t[2]]:[e,""]},a.fromJson=function(e){const t=o.utils.replaceMessageReferences(e.name);return new a(t)},o.fieldRegistry.register("field_lexical_variable",a);const c={renameGlobal:function(e){const t=this.value_;e=c.makeLegalIdentifier(e),this.sourceBlock_.getField("NAME").doValueUpdate_(e);const n=a.getGlobalNames(this.sourceBlock_);if(e=a.nameNotIn(e,n),this.sourceBlock_.rendered&&o.common.getMainWorkspace()){const n=o.common.getMainWorkspace().getAllBlocks();for(let s=0;s<n.length;s++){const i=n[s],a=i.renameLexicalVar;a&&a.call(i,r.GLOBAL_KEYWORD+r.menuSeparator+t,r.GLOBAL_KEYWORD+r.menuSeparator+e,o.Msg.LANG_VARIABLES_GLOBAL_PREFIX+r.menuSeparator+t,o.Msg.LANG_VARIABLES_GLOBAL_PREFIX+r.menuSeparator+e)}}return e},renameParam:function(e){const t=this.htmlInput_,n=this.getValue()||t&&t.defaultValue||this.getText();return e=c.makeLegalIdentifier(e),c.renameParamFromTo(this.sourceBlock_,n,e,!1)},renameParamFromTo:function(e,t,n,o){return e.mustNotRenameCapturables?c.renameParamWithoutRenamingCapturables(e,t,n,[]):o?(c.renameParamRenamingCapturables(e,t,n),n):c.renameParamWithoutRenamingCapturables(e,t,n,[])},renameParamRenamingCapturables:function(e,t,n){if(n!==t){const o=e.declaredNames?e.declaredNames():[];if(-1==o.indexOf(t))throw Error("LexicalVariable.renamingCapturables: oldName "+t+" is not in declarations {"+o.join(",")+"}");const r=[];a.getNamesInScope(e).map((function(e){e[0]==e[1]?r.push(e[0]):r.push(e[0],e[1])}));const s=o.concat(r);if(-1!=s.indexOf(n))throw Error("LexicalVariable.renameParamRenamingCapturables: newName "+n+" is in existing declarations {"+s.join(",")+"}");if(!e.renameBound)throw Error("LexicalVariable.renameParamRenamingCapturables: block "+e.type+" is not a declaration block.");{const o=i.W.simpleSubstitution(t,n),r=new i.W;e.renameBound(o,r)}}},renameFree:function(e,t){e&&(e.renameFree?e.renameFree(t):e.getChildren().map((function(e){c.renameFree(e,t)})))},freeVariables:function(e){let t=[];if(e)if(e.freeVariables)t=e.freeVariables();else{const n=e.getChildren().map((function(e){return c.freeVariables(e)}));t=s.a.unionAll(n)}else t=new s.a;return t},renameParamWithoutRenamingCapturables:function(e,t,n,o){if(t===n)return t;let s="";r.showPrefixToUser&&(s=this.lexicalVarPrefix);const i=c.renameParamWithoutRenamingCapturablesInfo(e,t,s),l=i[0],u=i[1];let _=[];if(e.declaredNames){_=e.declaredNames();const r=_.indexOf(t);if(-1!=r&&_.splice(r,1),-1!=o.indexOf(n)){const e=_.indexOf(n);-1!=e&&_.splice(e,1)}}const d=c.sortAndRemoveDuplicates(u.concat(_));if((n=a.nameNotIn(n,d))!==t&&-1==_.indexOf(t))for(let e=0;e<l.length;e++){const o=l[e],i=o.renameLexicalVar;i&&i.call(o,r.possiblyPrefixMenuNameWith(s)(t),r.possiblyPrefixMenuNameWith(s)(n))}return n},renameParamWithoutRenamingCapturablesInfo:function(e,t,n){let o=[];e.blocksInScope&&(o=e.blocksInScope());const r=o.map((function(e){return c.referenceResult(e,t,n,[])}));let s=[],i=[];for(let e=0;e<r.length;e++)s=s.concat(r[e][0]),i=i.concat(r[e][1]);return i=c.sortAndRemoveDuplicates(i),[s,i]},checkIdentifier:function(e){const t=e.trim().replace(/[\s\xa0]+/g,"_"),n=new RegExp("^[^-0-9!&%^/>=<`'\"#:;,\\\\*+.()|{}[\\] ][^-!&%^/>=<'\"#:;,\\\\*+.()|{}[\\] ]*$");return{isLegal:0==t.search(n),transformed:t}},makeLegalIdentifier:function(e){const t=c.checkIdentifier(e);return t.isLegal?t.transformed:""===t.transformed?"_":"name"},referenceResult:function(e,t,n,o){if(!e)return[[],[]];const r=e.referenceResults?e.referenceResults(t,n,o):e.getChildren().map((function(e){return c.referenceResult(e,t,n,o)}));let s=[],i=[];for(let e=0;e<r.length;e++)s=s.concat(r[e][0]),i=i.concat(r[e][1]);return[s,i]},sortAndRemoveDuplicates:function(e){const t=e.sort(),n=[];if(e.length>=1){let e=t[0];n.push(e);for(let o=1;o<t.length;o++)t[o]!==e&&(e=t[o],n.push(e))}return n},getNextTargetBlock:function(e){return e&&e.nextConnection&&e.nextConnection.targetBlock()?e.nextConnection.targetBlock():null},stringListsEqual:function(e,t){const n=e.length;if(n!==t.length)return!1;for(let o=0;o<n;o++)if(e[o]!==t[o])return!1;return!0}}},793:(e,t,n)=>{n.d(t,{f:()=>r});var o=n(370);n(720);class r extends o.FieldDropdown{constructor(...e){super(...e)}}r.prototype.doClassValidation_=function(e){let t=!1;const n=this.getOptions(!0);for(let o,r=0;o=n[r];r++)if(o[1]===e){t=!0;break}return t||this.generatedOptions.push([e,e]),e},r.fromJson=function(e){return new r(e.options,void 0,e)},o.fieldRegistry.register("field_nocheck_dropdown",r)},701:(e,t,n)=>{n.d(t,{T:()=>i});var o=n(370),r=(n(720),n(917)),s=n(824);class i extends r.G{constructor(e,t,n,o){super(e,t,n,(function(e){if(!i.changeHandlerEnabled)return e;const t=s.f.renameParam.call(this,e);return o&&o.call(this,t),t}))}}i.prototype.fieldCSSClassName="blocklyFieldParameter",i.prototype.flyoutCSSClassName="blocklyFieldParameterFlydown",i.changeHandlerEnabled=!0,i.withChangeHanderDisabled=function(e){const t=i.changeHandlerEnabled;i.changeHandlerEnabled=!1;try{e()}finally{i.changeHandlerEnabled=t}},i.prototype.flydownBlocksXML_=function(){const e=this.getText();return'<xml><block type="lexical_variable_get"><field name="VAR">'+e+'</field></block><block type="lexical_variable_set"><field name="VAR">'+e+"</field></block></xml>"},i.addHorizontalVerticalOption=function(e,t){let n=0;if(e.getParameters&&(n=e.getParameters().length),e.isCollapsed()||n<=0)return;const r={enabled:!0,text:e.horizontalParameters?o.Msg.VERTICAL_PARAMETERS:o.Msg.HORIZONTAL_PARAMETERS,callback:function(){e.setParameterOrientation(!e.horizontalParameters)}};let s=0;for(let e;(e=t[s])&&e.text!=o.Msg.COLLAPSE_BLOCK;s++);t.splice(s,0,r);for(let e,n=0;e=t[n];n++)if(e.text==o.Msg.INLINE_INPUTS){t.splice(n,1);break}},i.fromJson=function(e){const t=o.utils.replaceMessageReferences(e.name);return new i(t,e.is_editable)},o.fieldRegistry.register("field_parameter_flydown",i)},374:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(370),r=(n(720),n(526));class s extends o.FieldTextInput{constructor(e){super(e,r.mQ)}setValue(e){if(this.sourceBlock_&&this.sourceBlock_.isInFlyout)return;const t=this.getValue();if(this.oldName_=t,this.doValueUpdate_(e),super.setValue(e),"string"==typeof(e=this.getValue())&&this.sourceBlock_){const n=this.sourceBlock_.workspace.getProcedureDatabase();n&&(n.getProcedure(this.sourceBlock_.id)?n.renameProcedure(this.sourceBlock_.id,t,e):n.addProcedure(e,this.sourceBlock_))}this.oldName_=void 0}}s.fromJson=function(e){const t=o.utils.replaceMessageReferences(e.name);return new s(t)},o.fieldRegistry.register("field_procedurename",s)},720:(e,t,n)=>{var o=n(370);o.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_TITLE_INIT="initialize global",o.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_NAME="name",o.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_TO="to",o.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_COLLAPSED_TEXT="global",o.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_TOOLTIP="Creates a global variable and gives it the value of the attached blocks.",o.Msg.LANG_VARIABLES_GLOBAL_PREFIX="global",o.Msg.LANG_VARIABLES_GET_TITLE_GET="get",o.Msg.LANG_VARIABLES_GET_COLLAPSED_TEXT="get",o.Msg.LANG_VARIABLES_GET_TOOLTIP="Returns the value of this variable.",o.Msg.LANG_VARIABLES_SET_TITLE_SET="set",o.Msg.LANG_VARIABLES_SET_TITLE_TO="to",o.Msg.LANG_VARIABLES_SET_COLLAPSED_TEXT="set",o.Msg.LANG_VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",o.Msg.LANG_VARIABLES_VARIABLE=" variable",o.Msg.LANG_VARIABLES_LOCAL_DECLARATION_TITLE_INIT="initialize local",o.Msg.LANG_VARIABLES_LOCAL_DECLARATION_DEFAULT_NAME="name",o.Msg.LANG_VARIABLES_LOCAL_DECLARATION_INPUT_TO="to",o.Msg.LANG_VARIABLES_LOCAL_DECLARATION_IN_DO="in",o.Msg.LANG_VARIABLES_LOCAL_DECLARATION_COLLAPSED_TEXT="local",o.Msg.LANG_VARIABLES_LOCAL_DECLARATION_TOOLTIP="Allows you to create variables that are only accessible in the do part of this block.",o.Msg.LANG_VARIABLES_LOCAL_DECLARATION_TRANSLATED_NAME="initialize local in do",o.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_IN_RETURN="in",o.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_COLLAPSED_TEXT="local",o.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_TOOLTIP="Allows you to create variables that are only accessible in the return part of this block.",o.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_TRANSLATED_NAME="initialize local in return",o.Msg.LANG_VARIABLES_LOCAL_MUTATOR_CONTAINER_TITLE_LOCAL_NAMES="local names",o.Msg.LANG_VARIABLES_LOCAL_MUTATOR_CONTAINER_TOOLTIP="",o.Msg.LANG_VARIABLES_LOCAL_MUTATOR_ARG_TITLE_NAME="name",o.Msg.LANG_VARIABLES_LOCAL_MUTATOR_ARG_DEFAULT_VARIABLE="x",o.Msg.LANG_PROCEDURES_DEFNORETURN_DEFINE="to",o.Msg.LANG_PROCEDURES_DEFNORETURN_PROCEDURE="procedure",o.Msg.LANG_PROCEDURES_DEFNORETURN_DO="do",o.Msg.LANG_PROCEDURES_DEFNORETURN_COLLAPSED_PREFIX="to ",o.Msg.LANG_PROCEDURES_DEFNORETURN_TOOLTIP="A procedure that does not return a value.",o.Msg.LANG_PROCEDURES_DOTHENRETURN_THEN_RETURN="result",o.Msg.LANG_PROCEDURES_DOTHENRETURN_DO="do",o.Msg.LANG_PROCEDURES_DOTHENRETURN_RETURN="result",o.Msg.LANG_PROCEDURES_DOTHENRETURN_TOOLTIP="Runs the blocks in 'do' and returns a statement. Useful if you need to run a procedure before returning a value to a variable.",o.Msg.LANG_PROCEDURES_DOTHENRETURN_COLLAPSED_TEXT="do/result",o.Msg.LANG_PROCEDURES_DEFRETURN_DEFINE="to",o.Msg.LANG_PROCEDURES_DEFRETURN_PROCEDURE="procedure",o.Msg.LANG_PROCEDURES_DEFRETURN_RETURN="result",o.Msg.LANG_PROCEDURES_DEFRETURN_COLLAPSED_PREFIX="to ",o.Msg.LANG_PROCEDURES_DEFRETURN_TOOLTIP="A procedure returning a result value.",o.Msg.LANG_PROCEDURES_DEF_DUPLICATE_WARNING="Warning:\nThis procedure has\nduplicate inputs.",o.Msg.LANG_PROCEDURES_CALLNORETURN_CALL="call ",o.Msg.LANG_PROCEDURES_CALLNORETURN_PROCEDURE="procedure",o.Msg.LANG_PROCEDURES_CALLNORETURN_COLLAPSED_PREFIX="call ",o.Msg.LANG_PROCEDURES_CALLNORETURN_TOOLTIP="Call a procedure with no return value.",o.Msg.LANG_PROCEDURES_CALLNORETURN_TRANSLATED_NAME="call no return",o.Msg.LANG_PROCEDURES_CALLRETURN_CALL="call ",o.Msg.LANG_PROCEDURES_CALLRETURN_PROCEDURE="procedure",o.Msg.LANG_PROCEDURES_CALLRETURN_COLLAPSED_PREFIX="call ",o.Msg.LANG_PROCEDURES_CALLRETURN_TOOLTIP="Call a procedure with a return value.",o.Msg.LANG_PROCEDURES_CALLRETURN_TRANSLATED_NAME="call return",o.Msg.LANG_PROCEDURES_MUTATORCONTAINER_TITLE="inputs",o.Msg.LANG_PROCEDURES_MUTATORARG_TITLE="input:",o.Msg.LANG_PROCEDURES_HIGHLIGHT_DEF="Highlight Procedure",o.Msg.LANG_PROCEDURES_MUTATORCONTAINER_TOOLTIP="",o.Msg.LANG_PROCEDURES_MUTATORARG_TOOLTIP="",o.Msg.LANG_CONTROLS_FOR_INPUT_WITH="count with",o.Msg.LANG_CONTROLS_FOR_INPUT_VAR="x",o.Msg.LANG_CONTROLS_FOR_INPUT_FROM="from",o.Msg.LANG_CONTROLS_FOR_INPUT_TO="to",o.Msg.LANG_CONTROLS_FOR_INPUT_DO="do",o.Msg.LANG_CONTROLS_FOR_TOOLTIP="Count from a start number to an end number.\nFor each count, set the current count number to\nvariable '%1', and then do some statements.",o.Msg.LANG_CONTROLS_FORRANGE_INPUT_ITEM="for each",o.Msg.LANG_CONTROLS_FORRANGE_INPUT_VAR="number",o.Msg.LANG_CONTROLS_FORRANGE_INPUT_START="from",o.Msg.LANG_CONTROLS_FORRANGE_INPUT_END="to",o.Msg.LANG_CONTROLS_FORRANGE_INPUT_STEP="by",o.Msg.LANG_CONTROLS_FORRANGE_INPUT_DO="do",o.Msg.LANG_CONTROLS_FORRANGE_INPUT_COLLAPSED_TEXT="for number in range",o.Msg.LANG_CONTROLS_FORRANGE_INPUT_COLLAPSED_PREFIX="for",o.Msg.LANG_CONTROLS_FORRANGE_INPUT_COLLAPSED_SUFFIX=" in range",o.Msg.LANG_CONTROLS_FORRANGE_TOOLTIP="Runs the blocks in the 'do' section for each numeric value in the range from start to end, stepping the value each time.  Use the given variable name to refer to the current value.",o.Msg.LANG_CONTROLS_FOREACH_INPUT_ITEM="for each",o.Msg.LANG_CONTROLS_FOREACH_INPUT_VAR="item",o.Msg.LANG_CONTROLS_FOREACH_INPUT_INLIST="in list",o.Msg.LANG_CONTROLS_FOREACH_INPUT_DO="do",o.Msg.LANG_CONTROLS_FOREACH_INPUT_COLLAPSED_TEXT="for item in list",o.Msg.LANG_CONTROLS_FOREACH_INPUT_COLLAPSED_PREFIX="for ",o.Msg.LANG_CONTROLS_FOREACH_INPUT_COLLAPSED_SUFFIX=" in list",o.Msg.LANG_CONTROLS_FOREACH_TOOLTIP="Runs the blocks in the 'do'  section for each item in the list.  Use the given variable name to refer to the current list item.",o.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT="for each %1 with %2 in dictionary %3",o.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT_DO="do",o.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT_KEY="key",o.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT_VALUE="value",o.Msg.LANG_CONTROLS_FOREACH_DICT_TITLE="for each in dictionary",o.Msg.LANG_CONTROLS_FOREACH_DICT_TOOLTIP="Runs the blocks in the 'do' section for each key-value entry in the dictionary. Use the given variable names to refer to the key/value of the current dictionary item.",o.Msg.ERROR_SELECT_VALID_ITEM_FROM_DROPDOWN="Select a valid item in the drop down.",o.Msg.ERROR_BLOCK_CANNOT_BE_IN_DEFINITION="This block cannot be in a definition",o.Msg.HORIZONTAL_PARAMETERS="Arrange Parameters Horizontally",o.Msg.VERTICAL_PARAMETERS="Arrange Parameters Vertically",o.Msg.LANG_CONTROLS_DO_THEN_RETURN_INPUT_DO="do",o.Msg.LANG_CONTROLS_DO_THEN_RETURN_INPUT_RETURN="result",o.Msg.LANG_CONTROLS_DO_THEN_RETURN_TOOLTIP="Runs the blocks in 'do' and returns a statement. Useful if you need to run a procedure before returning a value to a variable.",o.Msg.LANG_CONTROLS_DO_THEN_RETURN_COLLAPSED_TEXT="do/result",o.Msg.LANG_CONTROLS_DO_THEN_RETURN_TITLE="do result",o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE=o.Msg.LANG_PROCEDURES_DEFNORETURN_PROCEDURE,o.Msg.PROCEDURES_DEFRETURN_PROCEDURE=o.Msg.LANG_PROCEDURES_DEFRETURN_PROCEDURE},976:(e,t,n)=>{n.d(t,{a:()=>o});const o=function(e){e||(e=[]),this.elements={};for(let t,n=0;t=e[n];n++)this.elements[t]=!0};o.prototype.isMember=function(e){return!!this.elements[e]},o.prototype.isEmpty=function(){for(let e in this.elements)return!1;return!0},o.prototype.size=function(){let e=0;for(let t in this.elements)e++;return e},o.prototype.toList=function(){const e=[];for(let t in this.elements)e.push(t);return e.sort()},o.prototype.toString=function(){return"NameSet{"+this.toList().join(",")+"}"},o.prototype.copy=function(){const e=new o;for(let t in this.elements)e.insert(t);return e},o.prototype.mirror=function(e){let t;for(t in this.elements)delete this.elements[t];for(t in e.elements)this.elements[t]=!0},o.prototype.insert=function(e){this.elements[e]=!0},o.prototype.deleteName=function(e){delete this.elements[e]},o.prototype.unite=function(e){for(let t in e.elements)this.elements[t]=!0},o.prototype.intersect=function(e){for(let t in this.elements)e.elements[t]||delete this.elements[t]},o.prototype.subtract=function(e){for(let t in this.elements)e.elements[t]&&delete this.elements[t]},o.prototype.rename=function(e){this.mirror(this.renamed(e))},o.prototype.insertion=function(e){const t=this.copy();return t.insert(e),t},o.prototype.deletion=function(e){const t=this.copy();return t.deleteName(e),t},o.prototype.union=function(e){const t=this.copy();return t.unite(e),t},o.prototype.intersection=function(e){const t=this.copy();return t.intersect(e),t},o.prototype.difference=function(e){const t=this.copy();return t.subtract(e),t},o.prototype.renamed=function(e){const t=new o;for(let n in this.elements){const o=e.apply(n);o?t.insert(o):t.insert(n)}return t},o.unionAll=function(e){const t=new o;for(let n,o=0;n=e[o];o++)t.unite(n);return t},o.intersectAll=function(e){if(0===e.length)return new o;{const t=e[0];for(let n,o=1;n=e[o];o++)t.intersect(n);return t}}},526:(e,t,n)=>{n.d(t,{Qp:()=>i,mQ:()=>a});var o=n(370),r=(n(720),n(824));const s=["",""],i=function(e,t){const n=(t||o.common.getMainWorkspace()).getTopBlocks(),r=[s];for(let t=0;t<n.length;t++){const o=n[t].getFieldValue("NAME");"procedures_defnoreturn"!=n[t].type||e?"procedures_defreturn"==n[t].type&&e&&r.push([o,o]):r.push([o,o])}return r.length>1&&r.splice(0,1),r},a=function(e){if(this.sourceBlock_&&this.sourceBlock_.isInFlyout)return e;const t=this.oldName_||this.getValue(),n=e;e=r.f.makeLegalIdentifier(e);const o=function(e){const t=e.workspace.getTopBlocks(!1),n=[];for(let o=0;o<t.length;o++)"procedures_defnoreturn"!==t[o].type&&"procedures_defreturn"!==t[o].type||t[o]!==e&&n.push(t[o]);return n}(this.sourceBlock_).map((function(e){return e.getFieldValue("NAME")}));(e=r.b.nameNotIn(e,o))!==n&&this.doValueUpdate_(e);const s=this.sourceBlock_.workspace.getAllBlocks();for(let n=0;n<s.length;n++){const o=s[n].renameProcedure;o&&o.call(s[n],t,e)}return this.oldName_=e,e}},624:(e,t,n)=>{n.r(t),n.d(t,{GLOBAL_KEYWORD:()=>i,handlerParameterPrefix:()=>l,localNamePrefix:()=>c,loopParameterPrefix:()=>u,loopRangeParameterPrefix:()=>_,menuSeparator:()=>d,possiblyPrefixGeneratedVarName:()=>R,possiblyPrefixMenuNameWith:()=>h,prefixGlobalMenuName:()=>g,prefixSeparator:()=>p,procedureParameterPrefix:()=>a,showPrefixToUser:()=>r,unprefixName:()=>f,usePrefixInCode:()=>s});var o=n(370);n(720);const r=!1,s=!1,i="global",a="input",l="input",c="local",u="item",_="counter",d=" ",p="_",h=function(e){return function(t){return(r?e+d:"")+t}},g=function(e){return o.Msg.LANG_VARIABLES_GLOBAL_PREFIX+d+e},f=function(e){if(0===e.indexOf(o.Msg.LANG_VARIABLES_GLOBAL_PREFIX+d))return[o.Msg.LANG_VARIABLES_GLOBAL_PREFIX,e.substring(o.Msg.LANG_VARIABLES_GLOBAL_PREFIX.length+d.length)];if(0===e.indexOf(i+d))return[i,e.substring(6+d.length)];if(r){const t=[a,l,c,u,_];for(let n=0;n<t.length;n++)if(0===e.indexOf(t[n]))return[t[n],e.substring(t[n].length+d.length)];return["",e]}return["",e]},R=function(e){return function(t){return(s?e+p:"")+t}}},232:(e,t,n)=>{n.d(t,{W:()=>o});const o=function(e,t){if(this.bindings={},o.isAllStringsArray(t)&&o.isAllStringsArray(e)&&e.length===t.length)for(var n=0;n<e.length;n++)this.bindings[e[n]]=t[n];else if(!t&&o.isBindingsObject(e))for(var r in this.bindings={},e)this.bindings[r]=e[r]};o.isAllStringsArray=function(e){if("object"!=typeof e||!e.length)return!1;for(var t=0;t<e.length;t++)if("string"!=typeof e[t])return!1;return!0},o.isBindingsObject=function(e){if("object"!=typeof e)return!1;for(var t in e)if("string"!=typeof t||(e[t],0))return!1;return!0},o.simpleSubstitution=function(e,t){var n={};return n[e]=t,new o(n)},o.prototype.apply=function(e){return this.bindings[e]||e},o.prototype.map=function(e){const t=this;return e.map((function(e){return t.apply(e)}))},o.prototype.toString=function(){var e=[];for(var t in this.bindings)e.push(t+":"+this.bindings[t]);return"Substitution{"+e.sort().join(",")+"}"},o.prototype.copy=function(){var e=new o;for(var t in this.bindings)e.bindings[t]=this.bindings[t];return e},o.prototype.restrictDomain=function(e){for(var t=new o,n=0;n<e.length;n++){var r=this.bindings[e[n]];r&&(t.bindings[e[n]]=r)}return t},o.prototype.remove=function(e){var t=new o;for(var n in this.bindings)-1==e.indexOf(n)&&(t.bindings[n]=this.bindings[n]);return t},o.prototype.extend=function(e){var t=this.copy();for(var n in e.bindings)t.bindings[n]=e.bindings[n];return t},o.prototype.domain=function(){var e=[];for(var t in this.bindings)e.push(t);return e.sort()},o.prototype.getBindings=function(){var e={};for(var t in this.bindings)e[t]=this.bindings[t];return e}},653:(e,t,n)=>{n.d(t,{i0:()=>r});var o=n(370);n(720);const r=function(e){return void 0!==e.children?e.children:Array.prototype.filter.call(e.childNodes,(function(e){return e.nodeType==o.utils.dom.NodeType.ELEMENT_NODE}))}},605:(e,t,n)=>{n.d(t,{A:()=>o}),n(370),n(720);class o{checkErrors(e){if(e.getSvgRoot&&!e.getSvgRoot()||e.readOnly)return e.hasWarning&&(e.hasWarning=!1),void(e.hasError&&(e.hasError=!1));e.errors||(e.errors=[]),e.warnings||(e.warnings=[]);const t=e.errors,n=e.warnings;for(let n=0;n<t.length;n++)if(t[n].func&&t[n].func.call(this,e,t[n]))return e.hasError||(e.hasError=!0),void(e.hasWarning&&(e.hasWarning=!1));e.hasError&&(e.hasError=!1);for(let t=0;t<n.length;t++)if(n[t].func&&n[t].func.call(this,e,n[t]))return void(e.hasWarning||(e.hasWarning=!0));e.warning&&e.setWarningText(null),e.hasWarning&&(e.hasWarning=!1)}setError(e,t){e.setWarningText(t)}setWarning(e,t){e.setWarningText(t)}}}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{o.r(r),o.d(r,{LexicalVariablesPlugin:()=>O});var e=o(370);o(653);var t=o(605),n=(o(720),o(526));const s=function(e){this.workspace_=e,this.procedures_={},this.returnProcedures_={},this.voidProcedures_={},this.length=0,this.returnProcedures=0,this.voidProcedures=0};s.defaultValue=["","none"],s.prototype.getNames=function(e){return n.Qp(e,this.workspace_).map((function(e){return e[0]}))},s.prototype.getMenuItems=function(e){return n.Qp(e,this.workspace_)},s.prototype.getDeclarationBlocks=function(t){return e.utils.object.values(t?this.returnProcedures_:this.voidProcedures_)},s.prototype.getDeclarationsBlocksExcept=function(t){const n=[];return e.utils.values(this.procedures_).forEach((function(e){e!==t&&n.push(e)})),n},s.prototype.getAllDeclarationNames=function(){return e.utils.values(this.procedures_).map((function(e){return e.getFieldValue("NAME")}))},s.prototype.addProcedure=function(e,t){if("procedures_defnoreturn"!=t.type&&"procedures_defreturn"!=t.type)return console.warn("Attempt to addProcedure with block type "+t.type),!1;const n=t.id;return!(n in this.procedures_)&&(this.procedures_[n]=t,this.length++,"procedures_defnoreturn"==t.type?(this.voidProcedures_[n]=t,this.voidProcedures++):(this.returnProcedures_[n]=t,this.returnProcedures++),!0)},s.prototype.removeProcedure=function(e){return e in this.procedures_&&("procedures_defnoreturn"==this.procedures_[e].type?(delete this.voidProcedures_[e],this.voidProcedures--):(delete this.returnProcedures_[e],this.returnProcedures--),delete this.procedures_[e],this.length--),!0},s.prototype.renameProcedure=function(e,t,n){},s.prototype.getProcedure=function(e){return this.procedures_[e]||this.getProcedureByName(e)},s.prototype.getProcedureByName=function(e){for(const t in this.procedures_)if(this.procedures_[t].getFieldValue("NAME")===e)return this.procedures_[t]},s.prototype.clear=function(){this.procedures_={},this.returnProcedures_={},this.voidProcedures_={},this.length=0,this.returnProcedures=0,this.voidProcedures=0},e.Workspace.prototype.flydown_=e.Workspace.prototype.flydown_||null,e.Workspace.prototype.getFlydown=e.Workspace.prototype.getFlydown||function(){return this.flydown_},e.Workspace.prototype.getProcedureDatabase=e.Workspace.prototype.getProcedureDatabase||function(){return this.procedureDb_||(this.procedureDb_=new s(this)),this.procedureDb_},e.Workspace.prototype.getTopWorkspace=e.Workspace.prototype.getTopWorkspace||function(){let e=this;for(;e.targetWorkspace;)e=e.targetWorkspace;return e},e.Workspace.prototype.getWarningHandler=e.Workspace.prototype.getWarningHandler||function(){return this.warningHandler_||(this.warningHandler_=new t.A),this.warningHandler_},e.WorkspaceSvg.prototype.flydown_=e.WorkspaceSvg.prototype.flydown_||null,e.WorkspaceSvg.prototype.getFlydown=e.WorkspaceSvg.prototype.getFlydown||function(){return this.flydown_},e.WorkspaceSvg.prototype.getProcedureDatabase=e.WorkspaceSvg.prototype.getProcedureDatabase||function(){return this.procedureDb_||(this.procedureDb_=new s(this)),this.procedureDb_},e.WorkspaceSvg.prototype.getTopWorkspace=e.WorkspaceSvg.prototype.getTopWorkspace||function(){let e=this;for(;e.targetWorkspace;)e=e.targetWorkspace;return e},e.WorkspaceSvg.prototype.getWarningHandler=e.WorkspaceSvg.prototype.getWarningHandler||function(){return t.A};class i extends e.inputs.ValueInput{constructor(t,n){super(t,n),this.connection=this.makeConnection(e.ConnectionType.INPUT_VALUE),this.type=e.inputTypes.VALUE}}e.registry.register(e.registry.Type.INPUT,"indented_input",i);var a=o(917);class l extends e.VerticalFlyout{constructor(e){super(e),this.dragAngleRange_=360}}l.prototype.previousCSSClassName_="",l.prototype.VERTICAL_SEPARATION_FACTOR=1,l.prototype.createDom=function(t){return this.previousCSSClassName_=t,this.svgGroup_=e.utils.dom.createSvgElement("g",{class:t},null),this.svgBackground_=e.utils.dom.createSvgElement("path",{},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.svgGroup_},l.prototype.setCSSClass=function(t){t!==this.previousCSSClassName_&&(e.utils.dom.removeClass(this.svgGroup_,this.previousCSSClassName_),e.utils.dom.addClass(this.svgGroup_,t),this.previousCSSClassName_=t)},l.prototype.init=function(t){e.Flyout.prototype.init.call(this,t,!1),this.workspace_.setTheme(t.getTheme()),t.getComponentManager().addCapability(this.id,e.ComponentManager.Capability.AUTOHIDEABLE)},l.prototype.position=function(){},l.prototype.showAt=function(t,n,o){e.Events.disable();try{this.show(t)}finally{e.Events.enable()}const r=this.CORNER_RADIUS*this.workspace_.scale,s=this.width_-2*r,i=this.height_-2*r,a=["M 0,"+r];a.push("a",r,r,0,0,1,r,-r),a.push("h",s),a.push("a",r,r,0,0,1,r,r),a.push("v",i),a.push("a",r,r,0,0,1,-r,r),a.push("h",-s),a.push("a",r,r,0,0,1,-r,-r),a.push("z"),this.svgBackground_.setAttribute("d",a.join(" ")),this.svgGroup_.setAttribute("transform","translate("+n+", "+o+")")},l.prototype.reflow=function(){this.workspace_.scale=this.targetWorkspace.scale;const e=this.workspace_.scale;let t=0,n=0;const o=this.CORNER_RADIUS*e,r=this.workspace_.getTopBlocks(!1);for(let o,s=0;o=r[s];s++){const r=o.getHeightWidth();t=Math.max(t,r.width*e),n+=r.height*e}t+=2*o+this.tabWidth_*e;const s=this.workspace_.getRenderer().getConstants(),i=s.ADD_START_HATS?s.START_HAT_HEIGHT:0;if(n+=3*o+o*this.VERTICAL_SEPARATION_FACTOR*r.length+i*e/2,this.width_!=t){for(let n,s=0;n=r[s];s++){const r=n.getHeightWidth(),s=n.getRelativeToSurfaceXY();if(this.RTL){const r=t-o-e*(this.tabWidth_-s.x);n.moveBy(r,0),s.x+=r}n.flyoutRect_&&(n.flyoutRect_.setAttribute("width",r.width),n.flyoutRect_.setAttribute("height",r.height),n.flyoutRect_.setAttribute("x",this.RTL?s.x-r.width:s.x),n.flyoutRect_.setAttribute("y",s.y))}this.width_=t,this.height_=n}},l.prototype.onMouseMove_=function(e){},l.prototype.placeNewBlock_=function(t){const n=this.targetWorkspace,o=t.getSvgRoot();if(!o)throw Error("originBlock is not rendered.");let r=this.workspace_.scale;const s=this.workspace_.getSvgXY(o),i=s.x;s.x+=i/n.scale-i;const a=s.y;r=n.scale,s.y+=a/r-a;const l=e.Xml.blockToDom(t),c=e.Xml.domToBlock(l,n),u=c.getSvgRoot();if(!u)throw Error("block is not rendered.");const _=n.getSvgXY(u);return _.x+=n.scrollX/n.scale-n.scrollX,_.y+=n.scrollY/n.scale-n.scrollY,n.toolbox_&&!n.scrollbar&&(_.x+=n.toolbox_.getWidth()/n.scale,_.y+=n.toolbox_.getHeight()/n.scale),c.moveBy(s.x-_.x,s.y-_.y),c},l.prototype.shouldHide=!0,l.prototype.hide=function(){this.shouldHide&&(e.Flyout.prototype.hide.call(this),a.G.openFieldFlydown_=null),this.shouldHide=!0},l.prototype.autoHide=function(){this.hide()};var c=o(659),u=o(793),_=o(824),d=o(701),p=o(374),h=o(976),g=o(624),f=o(232);class R extends e.blockRendering.ExternalValueInput{constructor(e,t){super(e,t),this.connectedBlock?this.height=this.connectedBlockHeight:this.height=this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT}}class A extends e.geras.Highlighter{constructor(e){super(e)}drawIndentedInput(t){const n=t.getLastInput();if(this.RTL_){const o=t.height-n.connectionHeight-n.connectionOffsetY;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+this.highlightOffset+n.connectionWidth-1,t.yPos)+e.utils.svgPaths.lineOnAxis("v",n.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.connectionWidth,t.yPos+n.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.moveTo(n.xPos+n.connectionWidth+1,t.yPos+n.height)}}class E extends e.geras.Drawer{constructor(e,t){super(e,t),this.highlighter_=new A(t)}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.getLastInput()instanceof R?this.drawIndentedInput_(t):t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawIndentedInput_(t){const n=t.getLastInput();this.positionIndentedValueConnection_(t),this.highlighter_.drawIndentedInput(t);const o="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",n.connectionOffsetY)+o+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight-n.connectionOffsetY)+e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)}positionIndentedValueConnection_=function(e){const t=e.getLastInput();if(t.connectionModel){let n=e.xPos+e.statementEdge+e.constants_.TAB_WIDTH;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos+t.connectionOffsetY)}}}class L extends e.geras.RenderInfo{addInput_(e,t){e instanceof i?(t.elements.push(new R(this.constants_,e)),t.hasStatement=!0):super.addInput_(e,t)}}class N extends e.geras.Renderer{makeRenderInfo_(e){return new L(this,e)}makeDrawer_(e,t){return new E(e,t)}}e.Css.register("\n  .blocklyFieldParameter>rect {\n    fill: rgb(222, 143, 108);\n    fill-opacity: 1.0;\n    stroke-width: 2;\n    stroke: rgb(231, 175, 150);\n  }\n  .blocklyFieldParameter>text {\n    stroke-width: 1;\n    fill: #000;\n  }\n  .blocklyFieldParameter:hover>rect {\n    stroke-width: 2;\n    stroke: rgb(231,175,150);\n    fill: rgb(231,175,150);\n    fill-opacity: 1.0;\n  }\n  /*\n   * [lyn, 10/08/13] Control flydown with the getter/setter blocks.\n   */\n  .blocklyFieldParameterFlydown {\n    fill: rgb(231,175,150);\n    fill-opacity: 0.8;\n  }\n  /*\n   * [lyn, 10/08/13] Control parameter fields with flydown procedure\n   * caller block.\n   */\n  .blocklyFieldProcedure>rect {\n    fill: rgb(215,203,218);\n    fill-opacity: 1.0;\n    stroke-width: 0;\n    stroke: #000;\n  }\n  .blocklyFieldProcedure>text {\n    fill: #000;\n  }\n  .blocklyFieldProcedure:hover>rect {\n    stroke-width: 2;\n    stroke: #fff;\n    fill: rgb(215,203,218);\n    fill-opacity: 1.0;\n  }\n  /*\n   * [lyn, 10/08/13] Control flydown with the procedure caller block.\n   */\n  .blocklyFieldProcedureFlydown {\n    fill: rgb(215,203,218);\n    fill-opacity: 0.8;\n  }\n");class O{static init(t){const n=new l(new e.Options({scrollbars:!1,rtl:t.RTL,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,parentWorkspace:t}));t.flydown_=n,e.utils.dom.insertAfter(n.createDom("g"),t.svgBubbleCanvas_),n.init(t),n.autoClose=!0}static Flydown=l;static FieldFlydown=a.G;static FieldGlobalFlydown=c.l;static FieldParameterFlydown=d.T;static LexicalVariable=_.f;static FieldLexicalVariable=_.b;static FieldProcedureName=p.Z;static FieldNoCheckDropdown=u.f;static NameSet=h.a;static Shared=g;static Substitution=f.W}e.blockRendering.register("geras2_renderer",N)})(),r})()));
//# sourceMappingURL=core.js.map